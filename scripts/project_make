#!/bin/bash


if [ $# -gt 2 ]
then
	echo "Wrong number of arguments!"
	usage
	exit 1
fi

if [ $# -eq 0 ]
then
	#no arguments recieved (remote repos)
	create_remote
fi

case "$1" in
	"-l"|"--local")
		create_local "$2"
		exit 0
		;;
	"-r"|"--remote")
		create_remote
		exit 0
		;;
	*)
		echo "Unknown target ($1) specifier"
		usage
		exit 2
		;;
esac

function usage{
	echo "Usage of project_make:"
	echo "project_make [-l|--local] name"
	echo "project_make [-r|--remote]"
	echo "\t-l,--local  = Create local repository"
	echo "\t-r,--remote = Does not create repository."
	echo "\t              Used when repository pulled beforehand."
	echo "Remote is default"
}

function create_remote{
	echo "Creating remote project"	

	mkdir {src,include,build,bin,testdata,submit}

	touch "Makefile"

	touch .gitignore

	~/scripts/project_make_modules/main.bash

	~/scripts/project_make_modules/gitignore.bash
}

function create_local{
	if [ -e "$1" ]
	then
		echo "Name already exists!"
		exit 3
	fi
	
	mkdir "$1"
	
	cd "$1"
	
	mkdir {src,include,build,bin,testdata,submit}
	
	touch "Makefile"
	
	touch .gitignore
	
	~/scripts/project_make_modules/main.bash
	
	~/scripts/project_make_modules/gitignore.bash
	
	git init "../$1" 
}
